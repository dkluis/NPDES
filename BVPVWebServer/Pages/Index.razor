@page "/"

@inject NavigationManager _navMgr
@inject StateService _state
@{
    if (_state.UserId != Environment.UserName)
    {
        _state.InitUserInfo(Environment.UserName);
    }
}

<MudAlert Severity="Severity.Info">User @Environment.UserName is known as @_state.UserId</MudAlert>
<MudAlert Severity="Severity.Info">Dark Theme: @_state!.SystemState!.DarkTheme</MudAlert>
<MudAlert Severity="Severity.Info">IsLoggedIn: @_state.IsLoggedIn </MudAlert>

@{
    if (!_state.IsLoggedIn)
    {
        _navMgr.NavigateTo("/UserLogin");
    }
}

<PageTitle>Home Styropek ES</PageTitle>

<MudText Typo="Typo.h3" Align="Align.Center">BVPV Styropek - Environmental Services</MudText>
<MudText Typo="Typo.h4" Align="Align.Center">Home Page</MudText>

<MudPaper Class="pa-6 ma-8" Outlined="true" Elevation="3">
    <MudText Typo="Typo.body1">Working on Roles to create an example of Maintenance UI</MudText>
</MudPaper>

@code
{
    private void CheckUser()
    {
        if (_state.UserId != Environment.UserName)
        {
            _state.InitUserInfo(Environment.UserName);
        }
    }

}