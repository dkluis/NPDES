@using BVPVWebServer.Services
@inject StateService _stateService
@{
    if (_stateService.UserId == null)
    {
        _stateService.InitUserInfo("Init");
    }
}

<MudNavMenu>
    <MudNavLink Href="/Home" Match="NavLinkMatch.All">NPDES Home</MudNavLink>

    <MudDivider Class="my-2"/>
    <MudNavGroup Title="Waste Management" Expanded="false">
        <MudNavLink Href="/fetchdata" Match="NavLinkMatch.Prefix">Fetch Data</MudNavLink>
        <MudNavLink Href="/counter" Match="NavLinkMatch.Prefix">counter</MudNavLink>
    </MudNavGroup>
    <MudNavGroup Title="Water Management" Expanded="false">
        <MudNavLink Href="/fetchdata" Match="NavLinkMatch.Prefix">Fetch Data</MudNavLink>
        <MudNavLink Href="/counter" Match="NavLinkMatch.Prefix">counter</MudNavLink>
    </MudNavGroup>
    <MudNavGroup Title="Potable Water Mgt" Expanded="false">
        <MudNavLink Href="/fetchdata" Match="NavLinkMatch.Prefix">Fetch Data</MudNavLink>
        <MudNavLink Href="/counter" Match="NavLinkMatch.Prefix">counter</MudNavLink>
    </MudNavGroup>

    <MudDivider Class="my-2"/>
    <MudNavGroup Title="System Admin" Expanded="true">
        <MudNavLink Href="/users" Match="NavLinkMatch.Prefix">Users</MudNavLink>
        <MudNavLink Href="/roles" Match="NavLinkMatch.Prefix">Roles</MudNavLink>
        <MudNavLink Href="/apps" Match="NavLinkMatch.Prefix">Apps</MudNavLink>
    </MudNavGroup>

    <MudDivider Class="my-2"/>
    <MudNavGroup Title="Mode" Expanded="false">
        <MudThemeProvider @bind-IsDarkMode="@_isDarkMode" Theme="_theme"/>
        <MudSwitch @bind-Checked="@_isDarkMode" Color="Color.Primary" Class="ma-4" T="bool" Label="Toggle Lite/Dark"/>
    </MudNavGroup>

    @code{

    }

</MudNavMenu>


@code {
    private bool _collapseNavMenu = true;
    private string? NavMenuCssClass => _collapseNavMenu ? "collapse" : null;

    private void ToggleNavMenu()
    {
        _collapseNavMenu = !_collapseNavMenu;
    }

    private MudTheme _theme = new();
    private bool _isDarkMode;
}