@inject StateService _state
@{
    if (_state.UserId != Environment.UserName)
    {
        _state.InitUserInfo(Environment.UserName);
    }
}


<MudNavMenu>
    <MudNavLink Href="/" Match="NavLinkMatch.All">NPDES Home</MudNavLink>
    
    <MudDivider Class="my-2"/>
    <MudNavGroup Title="Waste Management" Expanded="false">
        <MudNavLink Href="/fetchdata" Match="NavLinkMatch.Prefix">Fetch Data</MudNavLink>
        <MudNavLink Href="/counter" Match="NavLinkMatch.Prefix">counter</MudNavLink>
    </MudNavGroup>
    <MudNavGroup Title="Water Management" Expanded="false">
        <MudNavLink Href="/fetchdata" Match="NavLinkMatch.Prefix">Fetch Data</MudNavLink>
        <MudNavLink Href="/counter" Match="NavLinkMatch.Prefix">counter</MudNavLink>
    </MudNavGroup>
    <MudNavGroup Title="Potable Water Mgt" Expanded="false">
        <MudNavLink Href="/fetchdata" Match="NavLinkMatch.Prefix">Fetch Data</MudNavLink>
        <MudNavLink Href="/counter" Match="NavLinkMatch.Prefix">counter</MudNavLink>
    </MudNavGroup>

    <MudDivider Class="my-2"/>
    <MudNavGroup Title="System Admin" Expanded="true">
        <MudNavLink Href="/roles" Match="NavLinkMatch.Prefix">Roles</MudNavLink>
        <MudNavLink Href="/apps" Match="NavLinkMatch.Prefix">Functions</MudNavLink>
        <MudNavGroup Title="User Admin" Expanded="false">
            <MudNavLink Href="/users" Match="NavLinkMatch.Prefix">Users</MudNavLink>
            <!--suppress SpellCheckingInspection -->
            <MudNavLink Href="/userpasswordreset" Match="NavLinkMatch.Prefix">Reset Password</MudNavLink>
        </MudNavGroup>
    </MudNavGroup>
    
    <MudDivider Class="my-2"/>
    <MudNavGroup Title="Mode" Expanded="false">
        <MudThemeProvider @bind-IsDarkMode="@_isDarkMode" Theme="_theme"/>
        <MudSwitch @bind-Checked="@_isDarkMode" Color="Color.Primary" Class="ma-4" T="bool" Label="Toggle Lite/Dark"/>
    </MudNavGroup>

    @code{

    }

</MudNavMenu>


@code {
    private bool _collapseNavMenu = true;
    private string? NavMenuCssClass => _collapseNavMenu ? "collapse" : null;
    private void ToggleNavMenu()
    {
        _collapseNavMenu = !_collapseNavMenu;
    }
    private MudTheme _theme = new();
    private bool _isDarkMode;
}

